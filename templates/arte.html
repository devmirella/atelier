<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atelier | Minha Arte</title>

    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/arte.css">
</head>
<body>

    <!-- Cabeçalho -->
    <header class="topo">
        <button class="voltar" id="btn-voltar">Voltar</button>
        <h1>Minha Arte</h1>

        <label class="favoritos-toggle">
            <input type="checkbox" id="filtro-favoritos">
            Mostrar só favoritos
        </label>
    </header>

    <!-- Galeria -->
    <main class="galeria">

        <div class="arte" data-id="1">
            <span class="estrela">☆</span>
            <div class="imagem"></div>
        </div>

        <div class="arte" data-id="2">
            <span class="estrela">☆</span>
            <div class="imagem"></div>
        </div>

        <div class="arte" data-id="3">
            <span class="estrela">☆</span>
            <div class="imagem"></div>
        </div>

    </main>

    <script>
        "use strict";

        // Protege a página
        if (localStorage.getItem("atelier_logado") !== "true") {
            window.location.href = "/";
        }

        // Botão voltar
        document.querySelector("#btn-voltar").addEventListener("click", function () {
            window.location.href = "/home";
        });

        const artes = document.querySelectorAll(".arte");
        let favoritos = JSON.parse(localStorage.getItem("atelier_favoritos")) || [];

        artes.forEach(arte => {
            const id = arte.dataset.id;

            if (favoritos.includes(id)) {
                arte.classList.add("favorito");
                arte.querySelector(".estrela").textContent = "★";
            }

            arte.querySelector(".estrela").addEventListener("click", function () {
                if (favoritos.includes(id)) {
                    favoritos = favoritos.filter(item => item !== id);
                    arte.classList.remove("favorito");
                    this.textContent = "☆";
                } else {
                    favoritos.push(id);
                    arte.classList.add("favorito");
                    this.textContent = "★";
                }

                localStorage.setItem("atelier_favoritos", JSON.stringify(favoritos));
            });
        });

        document.querySelector("#filtro-favoritos").addEventListener("change", function () {
            artes.forEach(arte => {
                if (this.checked && !arte.classList.contains("favorito")) {
                    arte.style.display = "none";
                } else {
                    arte.style.display = "block";
                }
            });
        });
    </script>
</body>
</html>
